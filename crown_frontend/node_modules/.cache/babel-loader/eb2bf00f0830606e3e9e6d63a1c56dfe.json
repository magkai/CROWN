{"ast":null,"code":"var _jsxFileName = \"/local/home/mkaiser/Documents/TREC_CAsT/demo/treccast-app/src/App.js\";\nimport React, { Component } from 'react';\nimport Form from './Form';\nimport Options from './Options';\nimport './index.css';\nimport Loader from 'react-loader-spinner';\nimport { usePromiseTracker, trackPromise } from \"react-promise-tracker\";\nimport ReactHtmlParser from 'react-html-parser';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleOptionChange = (optionId, value) => {\n      this.setState({\n        [optionId]: value\n      });\n    };\n\n    this.validateState = () => {\n      console.log(\"state in validateState: \" + this.state.edgeThreshold);\n      var errMessage = \"\";\n\n      if (this.state.retNbr < 1 || this.state.retNbr > 20) {\n        errMessage = errMessage + \" The number of returned results must lie between 1 and 20!\";\n      }\n\n      if (this.state.indriRetNbr < 10 || this.state.indriRetNbr > 1000) {\n        errMessage = errMessage + \" The number of returned Indri passages must lie between 10 and 1000!\";\n      }\n\n      if (this.state.nodeThreshold < 0.5 || this.state.nodeThreshold > 1.0) {\n        errMessage = errMessage + \" The node threshold must lie between 0.5 and 1.0!\";\n      }\n\n      if (this.state.edgeThreshold < 0 || this.state.edgeThreshold > 0.1) {\n        errMessage = errMessage + \" The edge threshold must lie between 0.0 and 0.1!\";\n      }\n\n      var score = parseFloat(this.state.h1) + parseFloat(this.state.h2) + parseFloat(this.state.h3);\n      console.log(\"score: \" + score);\n      var scoreVariance = 0.0001;\n      var diff = Math.abs(1.0 - score);\n      console.log(\"diff: \" + diff);\n\n      if (Math.abs(1.0 - score) > scoreVariance) {\n        errMessage = errMessage + \" The hyperparameters must sum up to 1.0!\";\n      }\n\n      this.setState({\n        err: errMessage\n      });\n      return errMessage;\n    };\n\n    this.handleSubmit = question => {\n      this.setState({\n        err: \"\",\n        api_err: \"\"\n      });\n      var errMessage = this.validateState();\n\n      if (errMessage !== \"\") {\n        console.log(\"Abort because of wrong parameters\");\n        return;\n      } //this.setState({ questions: [...this.state.questions,question] }, () => {\n\n\n      if (question !== null && question !== \"\") {\n        trackPromise(fetch(\"http://139.19.6.31:5000/getanswer\", {\n          //fetch(\"http://139.19.51.11:5000/getanswer\", {\n          // fetch(\"http://localhost:5000/getanswer\", {\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json',\n            credentials: 'same-origin'\n          },\n          method: 'post',\n          body: JSON.stringify({\n            \"questions\": [...this.state.questions, question],\n            \"retNbr\": this.state.retNbr,\n            \"indriRetNbr\": this.state.indriRetNbr,\n            \"nodeThreshold\": this.state.nodeThreshold,\n            \"edgeThreshold\": this.state.edgeThreshold,\n            \"convquery\": this.state.convquery,\n            \"h1\": this.state.h1,\n            \"h2\": this.state.h2,\n            \"h3\": this.state.h3\n          })\n        }).then(response => {\n          if (response.ok) {\n            return response.json();\n          } else {\n            console.log(\"ERROR when calling REST Api, response was:\" + response); //throw new Error('ERROR when calling REST Api');\n            //   this.setState({ answers:  [...this.state.answers,\"ERROR while calling REST API\"] }, () => {\n            //  this.setState({turn: this.state.turn+1});\n            //  })\n          }\n        }).then(data => this.setState({\n          questions: [...this.state.questions, question],\n          answers: [...this.state.answers, data[\"paragraphs\"]],\n          answerids: [...this.state.answerids, data[\"ids\"]],\n          nodes: [...this.state.nodes, data[\"nodes\"]],\n          edges: [...this.state.edges, data[\"edges\"]],\n          turn: this.state.turn + 1 //, () => { this.setState({turn: this.state.turn+1});\n\n        })).catch(error => this.setState({\n          api_err: error\n        }, () => {\n          console.log(\"ERROR when calling REST Api: \" + error); //this.setState({ answers:  [...this.state.answers,[\"ERROR while calling REST API\"]] }, () => {\n          //this.setState({turn: this.state.turn+1});\n          //})\n        })));\n      } // });\n\n    };\n\n    this.handleClearConv = () => {\n      //this.setState(this.initialState)\n      this.setState({\n        questions: [],\n        answers: [],\n        answerids: [],\n        nodes: [],\n        edges: [],\n        turn: -1\n      });\n    };\n\n    this.showSampleAnswers = () => {\n      var quest = [\"What flowering plants work for cold climates?\", \"How much cold can pansies tolerate?\", \"Can it survive frost?\"];\n      var aw1 = [\"mosses and shrubs. Plant life on the tundra consists of short clumps of liches, mosses, shrubs and surprisingly, several hundred species of flowering plants. These plants are all adapted to cold, windy climates, and have shallow root systems to take advantage of the thin layer of thawed soil above the permafrost.osses and shrubs. Plant life on the tundra consists of short clumps of liches, mosses, shrubs and surprisingly, several hundred species of flowering plants. These plants are all adapted to cold, windy climates, and have shallow root systems to take advantage of the thin layer of thawed soil above the permafrost.\", \"Back to Top. Hardy flowering plants can be defined as seasonal plants or a plant, which is adapted to the temperature, climate and to certain area. Hardy flowering plants have an ability to tolerate extreme cold, heat, wind, floods, and other geographic location, etc. Different types of hardy flowering plants.\", \"Some 'semi-autoflowering' strains that have been bred exclusively for outdoor use, particularly in outdoor climates such as that of the UK, will start flowering with as much as 16â€“17 hours of light per day. Usually they can start flowering in July and finish far earlier than other strains, particularly those that haven't been bred as outdoor strains. Semi-autoflowering strains can be harvested before the weather in northern latitudes becomes very wet and cold (generally October), whereas other strains are just finishing flowering, and may suffer from botrytis (grey mold) caused by wet weather. Alternatively growers may artificially induce the flowering period during the warmer months by blacking out the plants for 12 hours a day i.e. by covering the plants with black plastic for example, which excludes all light during this period so the plant can flower even during long days.\"];\n      var aw2 = [\" Also known as Winter Pansies, these are hardier than regular bedding pansies, tolerating more winter cold and summer heat. Plants form a low, bushy mound of bright green leaves, with loads of fragrant miniature pansy flowers from early spring to late fall, all winter in milder regions.lso known as Winter Pansies, these are hardier than regular bedding pansies, tolerating more winter cold and summer heat. Plants form a low, bushy mound of bright green leaves, with loads of fragrant miniature pansy flowers from early spring to late fall, all winter in milder regions.\", \"Back to Top. Hardy flowering plants can be defined as seasonal plants or a plant, which is adapted to the temperature, climate and to certain area. Hardy flowering plants have an ability to tolerate extreme cold, heat, wind, floods, and other geographic location, etc. Different types of hardy flowering plants.\", \"1 You can start pansy seeds indoors 6 to 8 weeks before you plan on transplanting them. 2 Plant seeds in late winter for early spring and summer flowering, or plant seeds in the summer for winter flowering. 3 Plant in moist, humus-rich, well-drained soil.4 Pansies like sun and cooler temperatures. Plant in moist, humus-rich, well-drained soil. 2 Pansies like sun and cooler temperatures. 3 Space the plants about 7 to 12 inches apart. 4 They will spread about 9 to 12 inches and grow to be about 6 to 9 inches tall.\"];\n      var aw3 = [\" Penta (Pentas lanceolata) is an evergreen bush that, in warm climates, will light up the landscape all year with colorful star-shaped clusters. Hummingbirds and butterflies will often visit the penta blooms before they visit other flowering plants. Although penta can survive an occasional light frost, it won't tolerate a hard freeze. If you live in a cold climate, either grow penta as an annual or plant it in a container and bring it indoors for the winter.\", \" Some of the types of flowers that are considered hardy annuals include the pansy, cornflower, and larkspur. Annuals that can tolerate damp, cold temperatures, but not frost are called half-hardy annuals.Some examples of half-hardy annual flowers include forget-me-nots, bells of Ireland, and baby's breath.hese terms are used as a means of identifying and separating certain types of flowers. What makes them different from one another is the life cycle of the plants and how long they produce blooms. When planting flowers or creating a garden, it is necessary to understand which plants are perennials and which are annuals.\", \" Crocus sativus thrives in the Mediterranean maquis, an ecotype superficially resembling the North American chaparral, and similar climates where hot and dry summer breezes sweep semi-arid lands. It can nonetheless survive cold winters, tolerating frosts as low as and short periods of snow cover. Irrigation is required if grown outside of moist environments such as Kashmir, where annual rainfall averages ; saffron-growing regions in Greece ( annually) and Spain () are far drier than the main cultivating Iranian regions. What makes this possible is the timing of the local wet seasons; generous spring rains and drier summers are optimal. Rain immediately preceding flowering boosts saffron yields; rainy or cold weather during flowering promotes disease and reduces yields. Persistently damp and hot conditions harm the crops, and rabbits, rats, and birds cause damage by digging up corms. Nematodes, leaf rusts, and corm rot pose other threats. Yet Bacillus subtilis inoculation may provide some benefit to growers by speeding corm growth and increasing stigma biomass yield.\"];\n      var ids1 = [\"MARCO_8519619\", \"MARCO_3510175\", \"MARCO_1471956\"];\n      var ids2 = [\"MARCO_5611079\", \"MARCO_3510175\", \"MARCO_4909757\"];\n      var ids3 = [\"MARCO_5160988\", \"MARCO_4909757\", \"CAR_5a3908be91058023e34e7a33a64b24c8f4382fa9\"];\n      /*     var nodes1 = new Map()\n           var nodes2 = new Map()\n           var nodes3 = new Map()\n           nodes1.set(\"MARCO_00\", [\"flower\", \"pansies\"])\n           nodes1.set(\"MARCO_01\", [\"flower\", \"pansies\"])\n           nodes1.set(\"MARCO_02\", [\"flower\", \"pansies\"])\n           nodes2.set(\"MARCO_10\", [\"flower\", \"pansies\"])\n           nodes2.set(\"MARCO_11\", [\"flower\", \"pansies\"])\n           nodes2.set(\"MARCO_12\", [\"flower\", \"pansies\"])\n           nodes3.set(\"MARCO_20\", [\"flower\", \"pansies\"])\n           nodes3.set(\"MARCO_21\", [\"flower\", \"pansies\"])\n           nodes3.set(\"MARCO_22\", [\"flower\", \"pansies\"])\n           var edges1 = new Map()\n           var edges2 = new Map()\n           var edges3 = new Map()\n           edges1.set(\"MARCO_00\", [\"(flower, pansies)\"])\n           edges1.set(\"MARCO_01\", [\"(flower, pansies)\"])\n           edges1.set(\"MARCO_02\", [\"(flower, pansies)\"])\n           edges2.set(\"MARCO_10\", [\"(flower, pansies)\"])\n           edges2.set(\"MARCO_11\", [\"(flower, pansies)\"])\n           edges2.set(\"MARCO_12\", [\"(flower, pansies)\"])\n           edges3.set(\"MARCO_20\", [\"(flower, pansies)\"])\n           edges3.set(\"MARCO_21\", [\"(flower, pansies)\"])\n           edges3.set(\"MARCO_22\", [\"(flower, pansies)\"])*/\n\n      var nodes1 = {\n        \"MARCO_8519619\": [\"plants\", \"cold\", \"climates\", \"flowering\", \"plant\"],\n        \"MARCO_3510175\": [\"plants\", \"cold\", \"flowering\", \"plant\"],\n        \"MARCO_1471956\": [\"plants\", \"cold\", \"climates\", \"flowering\", \"plant\"]\n      };\n      var nodes2 = {\n        \"MARCO_5611079\": [\"plants\", \"cold\", \"pansies\"],\n        \"MARCO_3510175\": [\"plants\", \"cold\", \"tolerate\", \"flowering\", \"plant\"],\n        \"MARCO_4909757\": [\"plants\", \"cold\", \"tolerate\"]\n      };\n      var nodes3 = {\n        \"MARCO_5160988\": [\"plants\", \"cold\", \"frost\", \"survive\", \"climates\"],\n        \"MARCO_4909757\": [\"plants\", \"cold\", \"frost\"],\n        \"CAR_5a3908be91058023e34e7a33a64b24c8f4382fa9\": [\"cold\", \"climates\", \"survive\", \"flowering\", \"frosts\"]\n      };\n      var edges1 = {\n        \"MARCO_8519619\": [\" (flowering,plants)\", \"(climates,cold)\"],\n        \"MARCO_3510175\": [\"(flowering,plants)\"],\n        \"MARCO_1471956\": [\" (flowering,plant)\", \"(climates,cold)\", \"(bloom,plant)\", \"(climates,plants)\"]\n      };\n      var edges2 = {\n        \"MARCO_5611079\": [\"(cold,pansies)\"],\n        \"MARCO_3510175\": [\"(flowering,plants)\", \"(plants,tolerate)\", \"(cold,tolerate)\", \"(flowering,tolerate)\"],\n        \"MARCO_4909757\": [\"(cold,tolerate)\"]\n      };\n      var edges3 = {\n        \"MARCO_5160988\": [\"(flowering,plants)\", \"(plants,survive)\", \"(frost,survive)\", \"(flowering,survive)\"],\n        \"MARCO_4909757\": [\"(cold,frost)\"],\n        \"CAR_5a3908be91058023e34e7a33a64b24c8f4382fa9\": [\"(cold,frosts)\", \"(cold,survive)\"]\n      };\n      this.setState({\n        questions: quest,\n        answers: [aw1, aw2, aw3],\n        answerids: [ids1, ids2, ids3],\n        nodes: [nodes1, nodes2, nodes3],\n        edges: [edges1, edges2, edges3],\n        turn: 2\n      });\n    };\n\n    this.initialState = {\n      questions: [],\n      answers: [],\n      answerids: [],\n      nodes: [],\n      edges: [],\n      turn: -1,\n      retNbr: 3,\n      indriRetNbr: 100,\n      nodeThreshold: 0.75,\n      edgeThreshold: 0.0,\n      convquery: \"conv_uw\",\n      h1: 0.6,\n      h2: 0.3,\n      h3: 0.1,\n      err: \"\",\n      api_err: \"\"\n    };\n    this.state = this.initialState;\n  } // state = {\n  //   questions:  [],\n  //   answers: [],\n  //turn: -1\n  //};\n  // prev_questions = []\n  //prev_answers = []\n  // prev_turn = -1\n\n\n  render() {\n    //#191970\n    var errorStyle = {\n      color: \"#FF0000\",\n      \"margin-bottom\": \"70px\"\n    };\n    var widthstyle = {\n      width: \"70%\"\n    };\n    var margin = {\n      \"margin-bottom\": \"70px\"\n    };\n    var inlinestyle = {\n      display: \"inline\"\n    };\n    return React.createElement(\"div\", {\n      className: \"full-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      align: \"center\",\n      style: margin,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }, \"CROWN: Conversational Passage Ranking By Reasoning Over Word Networks\"), React.createElement(\"div\", {\n      className: \"flex-row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"flex-small\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }, this.state.err && React.createElement(\"div\", {\n      className: \"error-message\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      align: \"center\",\n      style: errorStyle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }, this.state.err)), this.state.api_err && React.createElement(\"div\", {\n      className: \"error-message\",\n      style: errorStyle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }, \" \", \"500 Internal Server Error\"), React.createElement(Form, {\n      handleSubmit: this.handleSubmit,\n      onSubmit: this.handleSubmit,\n      handleClearConv: this.handleClearConv,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }), \"  \", React.createElement(LoadingIndicator, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }), \" \", React.createElement(TableBody, {\n      questions: this.state.questions,\n      answers: this.state.answers,\n      answerids: this.state.answerids,\n      nodes: this.state.nodes,\n      edges: this.state.edges,\n      turn: this.state.turn,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }), React.createElement(Description, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"flex-small\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"small-container\",\n      style: widthstyle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    }, React.createElement(SampleQuestion, {\n      showSampleAnswers: this.showSampleAnswers,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }), \" \", React.createElement(Options, {\n      onChange: this.handleOptionChange,\n      value: this.state,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233\n      },\n      __self: this\n    })))), React.createElement(Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    }));\n  }\n\n}\n\nconst SampleQuestion = props => {\n  var marginbutton = {\n    \"margin-left\": \"80%\"\n  };\n  const showSampleAnswers = props.showSampleAnswers;\n  return (//      <div>        \n    //    <label htmlFor=\"button\">Sample Conversation</label>\n    //  <button className=\"button\">Flowering Plants for Cold Climates</button>\n    // { }\n    //</div>\n    React.createElement(\"table\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      key: 'sampleconv_head',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263\n      },\n      __self: this\n    }, \"Sample Conversation on Flowering Plants for Cold Climates\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      class: \"no-bottom-border\",\n      key: 'turn1',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269\n      },\n      __self: this\n    }, \"Turn 1: \"), \" What flowering plants work for cold climates? \", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269\n      },\n      __self: this\n    }), React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270\n      },\n      __self: this\n    }, \"Turn 1: \"), \" What flowering plants work for cold climates? \", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270\n      },\n      __self: this\n    }), React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271\n      },\n      __self: this\n    }, \"Turn 1: \"), \" What flowering plants work for cold climates? \", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271\n      },\n      __self: this\n    }), React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272\n      },\n      __self: this\n    }, \"Turn 1: \"), \" What flowering plants work for cold climates? \", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272\n      },\n      __self: this\n    }), React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273\n      },\n      __self: this\n    }, \"Turn 1: \"), \" What flowering plants work for cold climates? \")), React.createElement(\"tr\", {\n      key: 'buttonrow',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"button\",\n      onClick: showSampleAnswers,\n      style: marginbutton,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277\n      },\n      __self: this\n    }, \"Answer\")))))\n  );\n};\n\nconst Description = () => {\n  return React.createElement(\"table\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288\n    },\n    __self: this\n  }, React.createElement(\"thead\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289\n    },\n    __self: this\n  }, React.createElement(\"tr\", {\n    key: 'description',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290\n    },\n    __self: this\n  }, React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291\n    },\n    __self: this\n  }, \"Description\"))), React.createElement(\"tbody\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294\n    },\n    __self: this\n  }, React.createElement(\"tr\", {\n    key: 'desc',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295\n    },\n    __self: this\n  }, React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297\n    },\n    __self: this\n  }, \"CROWN is an unsupervised approach for conversational passage ranking. Answers are retrieved from MS MARCO and TREC CAR datasets. We formulated the objective of maximizing the passage score for a query as a combination of similarity and coherence. Passages are preferred that contain words semantically similar to the words used in the question. Coherence is expressed using term proximity. We built a word-proximity network from the corpus, where words are nodes and there is an edge between two nodes if they co-occur in the same passage in a statistically significant way, within a context window. We use NPMI (normalized pointwise mutual information) as a measure of this word association significance.\"), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 305\n    },\n    __self: this\n  }, \"Our code and data are available here.\"), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307\n    },\n    __self: this\n  }, \"To cite CROWN:\"), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309\n    },\n    __self: this\n  }, \"For feedback and clarifications, please contact:\"), React.createElement(\"ul\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310\n    },\n    __self: this\n  }, React.createElement(\"li\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312\n    },\n    __self: this\n  }, React.createElement(\"a\", {\n    href: \"http://people.mpi-inf.mpg.de/~mkaiser/\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312\n    },\n    __self: this\n  }, \"Magdalena Kaiser\"), \" (mkaiser AT mpi HYPHEN inf DOT mpg DOT de)\"), React.createElement(\"li\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313\n    },\n    __self: this\n  }, React.createElement(\"a\", {\n    href: \"http://people.mpi-inf.mpg.de/~rsaharo/\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313\n    },\n    __self: this\n  }, \"Rishiraj Saha Roy\"), \" (rishiraj AT mpi HYPHEN inf DOT mpg DOT de)\"))))));\n};\n\nconst LoadingIndicator = props => {\n  const _usePromiseTracker = usePromiseTracker(),\n        promiseInProgress = _usePromiseTracker.promiseInProgress;\n\n  return promiseInProgress && React.createElement(\"div\", {\n    style: {\n      width: \"100%\",\n      height: \"100\",\n      display: \"flex\",\n      justifyContent: \"center\",\n      alignItems: \"center\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 328\n    },\n    __self: this\n  }, React.createElement(Loader, {\n    type: \"ThreeDots\",\n    color: \"#0366EE\",\n    height: 100,\n    width: 100,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 334\n    },\n    __self: this\n  }));\n};\n\nconst TableBody = props => {\n  const questions = props.questions,\n        answers = props.answers,\n        answerids = props.answerids,\n        nodes = props.nodes,\n        edges = props.edges,\n        turn = props.turn;\n  console.log(\"in tablebody, questions: \" + questions);\n  console.log(\"in tablebody, answers: \" + answers);\n  console.log(\"in tablebody, turn: \" + turn);\n  var tablelayout = {\n    border: \"0\"\n  };\n  return React.createElement(\"table\", {\n    style: tablelayout,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 351\n    },\n    __self: this\n  }, React.createElement(\"tbody\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 352\n    },\n    __self: this\n  }, [...questions].reverse().map((question, index) => {\n    return React.createElement(\"tr\", {\n      className: \"noBorder\",\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 355\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 356\n      },\n      __self: this\n    }, React.createElement(InnerTable, {\n      question: question,\n      answers: [...answers].reverse()[index],\n      answerids: [...answerids].reverse()[index],\n      nodes: [...nodes].reverse()[index],\n      edges: [...edges].reverse()[index],\n      nbr: index,\n      turn: turn,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 357\n      },\n      __self: this\n    })));\n  })));\n};\n\nconst InnerTable = props => {\n  const question = props.question,\n        answers = props.answers,\n        answerids = props.answerids,\n        nodes = props.nodes,\n        edges = props.edges,\n        nbr = props.nbr,\n        turn = props.turn;\n  const rows = answers.map((answer, index) => {\n    for (var i = 0; i < nodes[answerids[index]].length; i++) {\n      var find = nodes[answerids[index]][i];\n      var pattern = \"(\\\\s|\\\\b)(\".concat(find, \")(\\\\s|\\\\b)\");\n      var regexp = new RegExp(pattern, 'ig'); // ignore case (optional) and match all\n\n      var replaceMask = \"$1<b>$2</b>$3\";\n      answer = answer.replace(regexp, replaceMask);\n    }\n\n    return React.createElement(\"tr\", {\n      class: \"no-bottom-border\",\n      key: \"row_table\".concat(index.toString()),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 388\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 389\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 390\n      },\n      __self: this\n    }, React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 391\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      class: \"no-bottom-border\",\n      key: \"\".concat(nbr.toString()).concat(\"_\").concat(index.toString()),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 392\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 393\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 393\n      },\n      __self: this\n    }, \"Rank \", index + 1, \" : \"), \" \", ReactHtmlParser(answer), \" [\", answerids[index], \"]\")), React.createElement(\"tr\", {\n      class: \"no-bottom-border\",\n      key: \"nodes\".concat(nbr.toString()).concat(\"_\").concat(index.toString()),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 396\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 397\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 397\n      },\n      __self: this\n    }, \"Top Nodes: \"), nodes[answerids[index]].toString())), React.createElement(\"tr\", {\n      class: \"no-bottom-border\",\n      key: \"edges\".concat(nbr.toString()).concat(\"_\").concat(index.toString()),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 400\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 401\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 401\n      },\n      __self: this\n    }, \"Top Edges:\"), \" \", edges[answerids[index]].toString()))))));\n  });\n  return React.createElement(\"table\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 411\n    },\n    __self: this\n  }, React.createElement(\"thead\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 412\n    },\n    __self: this\n  }, React.createElement(\"tr\", {\n    key: question,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 413\n    },\n    __self: this\n  }, React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 414\n    },\n    __self: this\n  }, \"Results for Turn \", turn - nbr + 1, \": \", question))), React.createElement(\"tbody\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 417\n    },\n    __self: this\n  }, rows));\n};\n\nconst Footer = () => {\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 427\n    },\n    __self: this\n  }, React.createElement(\"footer\", {\n    className: \"footer\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 428\n    },\n    __self: this\n  }, React.createElement(\"hr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 429\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"full-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 430\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 431\n    },\n    __self: this\n  }, \"\\xA9 \", React.createElement(\"a\", {\n    href: \"https://www.mpi-inf.mpg.de/departments/databases-and-information-systems/\",\n    target: \"_blank\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 433\n    },\n    __self: this\n  }, \"Database & Information Systems Group\"), \", \", React.createElement(\"a\", {\n    href: \"http://www.mpi-inf.mpg.de/home/\",\n    target: \"_blank\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 434\n    },\n    __self: this\n  }, \"Max Planck Institute for Informatics\"), \". 2019.\", \" | \", React.createElement(\"a\", {\n    href: \"https://imprint.mpi-klsb.mpg.de/inf/crown.mpi-inf.mpg.de\",\n    target: \"_blank\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 436\n    },\n    __self: this\n  }, \"Impressum\"), \" | \", React.createElement(\"a\", {\n    href: \"https://data-protection.mpi-klsb.mpg.de/inf/crown.mpi-inf.mpg.de\",\n    target: \"_blank\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 437\n    },\n    __self: this\n  }, \"Datenschutz\"), React.createElement(\"img\", {\n    src: \"Logo_MPII.png\",\n    className: \".responsive-image\",\n    width: \"200\",\n    height: \"50\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 438\n    },\n    __self: this\n  })))));\n};\n\nexport default App;","map":{"version":3,"sources":["/local/home/mkaiser/Documents/TREC_CAsT/demo/treccast-app/src/App.js"],"names":["React","Component","Form","Options","Loader","usePromiseTracker","trackPromise","ReactHtmlParser","App","constructor","props","handleOptionChange","optionId","value","setState","validateState","console","log","state","edgeThreshold","errMessage","retNbr","indriRetNbr","nodeThreshold","score","parseFloat","h1","h2","h3","scoreVariance","diff","Math","abs","err","handleSubmit","question","api_err","fetch","headers","credentials","method","body","JSON","stringify","questions","convquery","then","response","ok","json","data","answers","answerids","nodes","edges","turn","catch","error","handleClearConv","showSampleAnswers","quest","aw1","aw2","aw3","ids1","ids2","ids3","nodes1","nodes2","nodes3","edges1","edges2","edges3","initialState","render","errorStyle","color","widthstyle","width","margin","inlinestyle","display","SampleQuestion","marginbutton","Description","LoadingIndicator","promiseInProgress","height","justifyContent","alignItems","TableBody","tablelayout","border","reverse","map","index","InnerTable","nbr","rows","answer","i","length","find","pattern","regexp","RegExp","replaceMask","replace","concat","toString","Footer"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\n\nimport Form from './Form'\nimport Options from './Options'\nimport './index.css'\nimport Loader from 'react-loader-spinner';\nimport { usePromiseTracker, trackPromise } from \"react-promise-tracker\";\nimport ReactHtmlParser from 'react-html-parser';\n\n\n\nclass App extends Component {\n  \n constructor(props) {\n    super(props);\n\n    this.initialState = {\n        questions:  [],\n        answers: [],\n        answerids: [],\n        nodes: [],\n        edges:[],\n        turn: -1,\n        retNbr: 3,\n        indriRetNbr: 100,\n        nodeThreshold: 0.75,\n        edgeThreshold: 0.0,\n        convquery: \"conv_uw\",\n        h1: 0.6,\n        h2: 0.3,\n        h3: 0.1,\n        err: \"\",\n        api_err: \"\"\n                \n    };\n\n    this.state = this.initialState;\n  }\n   // state = {\n     //   questions:  [],\n       //   answers: [],\n          //turn: -1\n        //};\n        \n    // prev_questions = []\n     //prev_answers = []\n    // prev_turn = -1\n        \n    handleOptionChange = (optionId, value) => {\n        this.setState({ [optionId]: value });\n    }\n    \n    validateState = () => {\n        console.log(\"state in validateState: \" + this.state.edgeThreshold)\n        var errMessage = \"\";\n        if(this.state.retNbr < 1 || this.state.retNbr > 20) {\n           errMessage = errMessage +\" The number of returned results must lie between 1 and 20!\";\n        }\n        if(this.state.indriRetNbr < 10 || this.state.indriRetNbr > 1000) {\n            errMessage = errMessage +\" The number of returned Indri passages must lie between 10 and 1000!\";\n        }\n        if(this.state.nodeThreshold < 0.5 || this.state.nodeThreshold > 1.0) {\n            errMessage = errMessage +\" The node threshold must lie between 0.5 and 1.0!\";\n        }\n        if(this.state.edgeThreshold < 0 || this.state.edgeThreshold > 0.1) {\n            errMessage = errMessage +\" The edge threshold must lie between 0.0 and 0.1!\";\n        }\n        \n        var score = parseFloat(this.state.h1) + parseFloat(this.state.h2) + parseFloat(this.state.h3)\n        console.log(\"score: \" + score)\n        var scoreVariance = 0.0001\n        var diff = Math.abs(1.0 - score)\n        console.log(\"diff: \" + diff)\n        if(Math.abs(1.0 - score) > scoreVariance ) {\n            errMessage = errMessage +\" The hyperparameters must sum up to 1.0!\";\n        }\n       \n        \n        this.setState({err: errMessage});\n        return errMessage;\n    }\n\n    \n    handleSubmit = question => { \n        this.setState({err: \"\", api_err: \"\"});\n        var errMessage = this.validateState();\n        if(errMessage !== \"\") {  \n            console.log(\"Abort because of wrong parameters\")\n            return;\n        }\n     \n        //this.setState({ questions: [...this.state.questions,question] }, () => {\n        if (question !== null && question !== \"\") {\n            trackPromise(\n                fetch(\"http://139.19.6.31:5000/getanswer\", {\n                //fetch(\"http://139.19.51.11:5000/getanswer\", {\n              // fetch(\"http://localhost:5000/getanswer\", {\n                     headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json', credentials: 'same-origin'},\n\n                method: 'post', body: JSON.stringify({\"questions\" : [...this.state.questions,question], \n                                                        \"retNbr\": this.state.retNbr, \"indriRetNbr\": this.state.indriRetNbr, \n                                                     \"nodeThreshold\": this.state.nodeThreshold, \"edgeThreshold\": this.state.edgeThreshold,\n                                                  \"convquery\": this.state.convquery, \"h1\": this.state.h1,\n                                                    \"h2\": this.state.h2, \"h3\": this.state.h3})\n                  }).then(response => {\n                    if (response.ok) {\n                      return response.json();\n                    } else {\n                        console.log(\"ERROR when calling REST Api, response was:\" + response);\n                      //throw new Error('ERROR when calling REST Api');\n                   //   this.setState({ answers:  [...this.state.answers,\"ERROR while calling REST API\"] }, () => {\n                      //  this.setState({turn: this.state.turn+1});\n\n                      //  })\n                    }\n                  })\n                  .then(data =>this.setState({questions: [...this.state.questions, question],\n                       answers:  [...this.state.answers,data[\"paragraphs\"]], answerids:  [...this.state.answerids,data[\"ids\"]], \n                       nodes: [...this.state.nodes, data[\"nodes\"]], edges: [...this.state.edges, data[\"edges\"]], turn: this.state.turn+1 }\n                   //, () => { this.setState({turn: this.state.turn+1});\n\n                  ))\n                  .catch(error => this.setState({api_err: error }, () => {\n                      console.log(\"ERROR when calling REST Api: \" + error);\n                      //this.setState({ answers:  [...this.state.answers,[\"ERROR while calling REST API\"]] }, () => {\n                        //this.setState({turn: this.state.turn+1});\n\n                        //})\n              })));\n          }\n\n       // });\n    \n    }\n \n    \n    handleClearConv = () => {\n        //this.setState(this.initialState)\n        this.setState({questions:  [],answers: [], answerids: [], nodes: [], edges: [], turn: -1})\n        \n    }\n    \n   \n    showSampleAnswers = () => {\n        var quest = [\"What flowering plants work for cold climates?\", \"How much cold can pansies tolerate?\", \"Can it survive frost?\"  ]\n        var aw1 = [\"mosses and shrubs. Plant life on the tundra consists of short clumps of liches, mosses, shrubs and surprisingly, several hundred species of flowering plants. These plants are all adapted to cold, windy climates, and have shallow root systems to take advantage of the thin layer of thawed soil above the permafrost.osses and shrubs. Plant life on the tundra consists of short clumps of liches, mosses, shrubs and surprisingly, several hundred species of flowering plants. These plants are all adapted to cold, windy climates, and have shallow root systems to take advantage of the thin layer of thawed soil above the permafrost.\",\n        \"Back to Top. Hardy flowering plants can be defined as seasonal plants or a plant, which is adapted to the temperature, climate and to certain area. Hardy flowering plants have an ability to tolerate extreme cold, heat, wind, floods, and other geographic location, etc. Different types of hardy flowering plants.\",\n    \"Some 'semi-autoflowering' strains that have been bred exclusively for outdoor use, particularly in outdoor climates such as that of the UK, will start flowering with as much as 16â€“17 hours of light per day. Usually they can start flowering in July and finish far earlier than other strains, particularly those that haven't been bred as outdoor strains. Semi-autoflowering strains can be harvested before the weather in northern latitudes becomes very wet and cold (generally October), whereas other strains are just finishing flowering, and may suffer from botrytis (grey mold) caused by wet weather. Alternatively growers may artificially induce the flowering period during the warmer months by blacking out the plants for 12 hours a day i.e. by covering the plants with black plastic for example, which excludes all light during this period so the plant can flower even during long days.\"]\n        var aw2 = [\" Also known as Winter Pansies, these are hardier than regular bedding pansies, tolerating more winter cold and summer heat. Plants form a low, bushy mound of bright green leaves, with loads of fragrant miniature pansy flowers from early spring to late fall, all winter in milder regions.lso known as Winter Pansies, these are hardier than regular bedding pansies, tolerating more winter cold and summer heat. Plants form a low, bushy mound of bright green leaves, with loads of fragrant miniature pansy flowers from early spring to late fall, all winter in milder regions.\",\n        \"Back to Top. Hardy flowering plants can be defined as seasonal plants or a plant, which is adapted to the temperature, climate and to certain area. Hardy flowering plants have an ability to tolerate extreme cold, heat, wind, floods, and other geographic location, etc. Different types of hardy flowering plants.\",\n    \"1 You can start pansy seeds indoors 6 to 8 weeks before you plan on transplanting them. 2 Plant seeds in late winter for early spring and summer flowering, or plant seeds in the summer for winter flowering. 3 Plant in moist, humus-rich, well-drained soil.4 Pansies like sun and cooler temperatures. Plant in moist, humus-rich, well-drained soil. 2 Pansies like sun and cooler temperatures. 3 Space the plants about 7 to 12 inches apart. 4 They will spread about 9 to 12 inches and grow to be about 6 to 9 inches tall.\"]\n        var aw3 = [\" Penta (Pentas lanceolata) is an evergreen bush that, in warm climates, will light up the landscape all year with colorful star-shaped clusters. Hummingbirds and butterflies will often visit the penta blooms before they visit other flowering plants. Although penta can survive an occasional light frost, it won't tolerate a hard freeze. If you live in a cold climate, either grow penta as an annual or plant it in a container and bring it indoors for the winter.\", \n        \" Some of the types of flowers that are considered hardy annuals include the pansy, cornflower, and larkspur. Annuals that can tolerate damp, cold temperatures, but not frost are called half-hardy annuals.Some examples of half-hardy annual flowers include forget-me-nots, bells of Ireland, and baby's breath.hese terms are used as a means of identifying and separating certain types of flowers. What makes them different from one another is the life cycle of the plants and how long they produce blooms. When planting flowers or creating a garden, it is necessary to understand which plants are perennials and which are annuals.\",\n    \" Crocus sativus thrives in the Mediterranean maquis, an ecotype superficially resembling the North American chaparral, and similar climates where hot and dry summer breezes sweep semi-arid lands. It can nonetheless survive cold winters, tolerating frosts as low as and short periods of snow cover. Irrigation is required if grown outside of moist environments such as Kashmir, where annual rainfall averages ; saffron-growing regions in Greece ( annually) and Spain () are far drier than the main cultivating Iranian regions. What makes this possible is the timing of the local wet seasons; generous spring rains and drier summers are optimal. Rain immediately preceding flowering boosts saffron yields; rainy or cold weather during flowering promotes disease and reduces yields. Persistently damp and hot conditions harm the crops, and rabbits, rats, and birds cause damage by digging up corms. Nematodes, leaf rusts, and corm rot pose other threats. Yet Bacillus subtilis inoculation may provide some benefit to growers by speeding corm growth and increasing stigma biomass yield.\"]    \n        var ids1 = [\"MARCO_8519619\", \"MARCO_3510175\", \"MARCO_1471956\"]\n        var ids2 = [\"MARCO_5611079\", \"MARCO_3510175\", \"MARCO_4909757\"]\n        var ids3 = [\"MARCO_5160988\", \"MARCO_4909757\", \"CAR_5a3908be91058023e34e7a33a64b24c8f4382fa9\"]\n   /*     var nodes1 = new Map()\n        var nodes2 = new Map()\n        var nodes3 = new Map()\n        nodes1.set(\"MARCO_00\", [\"flower\", \"pansies\"])\n        nodes1.set(\"MARCO_01\", [\"flower\", \"pansies\"])\n        nodes1.set(\"MARCO_02\", [\"flower\", \"pansies\"])\n        nodes2.set(\"MARCO_10\", [\"flower\", \"pansies\"])\n        nodes2.set(\"MARCO_11\", [\"flower\", \"pansies\"])\n        nodes2.set(\"MARCO_12\", [\"flower\", \"pansies\"])\n        nodes3.set(\"MARCO_20\", [\"flower\", \"pansies\"])\n        nodes3.set(\"MARCO_21\", [\"flower\", \"pansies\"])\n        nodes3.set(\"MARCO_22\", [\"flower\", \"pansies\"])\n        var edges1 = new Map()\n        var edges2 = new Map()\n        var edges3 = new Map()\n        edges1.set(\"MARCO_00\", [\"(flower, pansies)\"])\n        edges1.set(\"MARCO_01\", [\"(flower, pansies)\"])\n        edges1.set(\"MARCO_02\", [\"(flower, pansies)\"])\n        edges2.set(\"MARCO_10\", [\"(flower, pansies)\"])\n        edges2.set(\"MARCO_11\", [\"(flower, pansies)\"])\n        edges2.set(\"MARCO_12\", [\"(flower, pansies)\"])\n        edges3.set(\"MARCO_20\", [\"(flower, pansies)\"])\n        edges3.set(\"MARCO_21\", [\"(flower, pansies)\"])\n        edges3.set(\"MARCO_22\", [\"(flower, pansies)\"])*/\n        \n        \n        var nodes1 = {\"MARCO_8519619\": [\"plants\",\"cold\",\"climates\",\"flowering\",\"plant\"], \"MARCO_3510175\": [\"plants\",\"cold\",\"flowering\",\"plant\"], \"MARCO_1471956\": [\"plants\",\"cold\",\"climates\",\"flowering\",\"plant\"]}\n      \n        var nodes2 = {\"MARCO_5611079\": [\"plants\",\"cold\",\"pansies\"], \"MARCO_3510175\": [\"plants\",\"cold\",\"tolerate\",\"flowering\",\"plant\"], \"MARCO_4909757\": [\"plants\",\"cold\",\"tolerate\"]}\n        \n        var nodes3 = {\"MARCO_5160988\": [\"plants\",\"cold\",\"frost\",\"survive\",\"climates\"],\"MARCO_4909757\": [\"plants\",\"cold\",\"frost\"], \"CAR_5a3908be91058023e34e7a33a64b24c8f4382fa9\": [\"cold\",\"climates\", \"survive\",\"flowering\",\"frosts\"]}\n        \n       \n        var edges1 = {\"MARCO_8519619\": [\" (flowering,plants)\",\"(climates,cold)\"], \"MARCO_3510175\": [\"(flowering,plants)\"], \"MARCO_1471956\": [\" (flowering,plant)\",\"(climates,cold)\",\"(bloom,plant)\",\"(climates,plants)\"]}\n      \n        var edges2 = {\"MARCO_5611079\": [\"(cold,pansies)\"], \"MARCO_3510175\": [\"(flowering,plants)\",\"(plants,tolerate)\",\"(cold,tolerate)\",\"(flowering,tolerate)\"], \"MARCO_4909757\": [\"(cold,tolerate)\"]}\n        \n        var edges3 = {\"MARCO_5160988\": [\"(flowering,plants)\",\"(plants,survive)\",\"(frost,survive)\",\"(flowering,survive)\"],\"MARCO_4909757\": [\"(cold,frost)\"], \"CAR_5a3908be91058023e34e7a33a64b24c8f4382fa9\": [\"(cold,frosts)\",\"(cold,survive)\"]}\n       \n        this.setState({questions:  quest ,answers: [aw1, aw2, aw3], answerids: [ids1, ids2, ids3], nodes: [nodes1, nodes2, nodes3], edges: [edges1, edges2, edges3], turn: 2})\n        \n\n    }\n\n\n    render() {\n      //#191970\n        var errorStyle = \n                {color:\"#FF0000\", \"margin-bottom\": \"70px\"}\n        var widthstyle = { width: \"70%\"}\n        var margin = {\"margin-bottom\": \"70px\"}\n        var inlinestyle = {display: \"inline\"}\n        return (\n                  <div className=\"full-container\" >\n                 <h3 align=\"center\" style={margin}>CROWN: Conversational Passage Ranking By Reasoning Over Word Networks</h3>\n                <div className=\"flex-row\">\n                \n           \n                    <div className=\"flex-small\">\n                      <div className=\"container\">\n                      {this.state.err && <div className=\"error-message\"><h2 align=\"center\" style={errorStyle}>{this.state.err}</h2></div>}\n                        {this.state.api_err && <div className=\"error-message\" style={errorStyle}>{\" \"}{\"500 Internal Server Error\"}</div>}\n                        <Form handleSubmit={this.handleSubmit} onSubmit={this.handleSubmit} handleClearConv={this.handleClearConv} />  {  }   \n                        <LoadingIndicator/> {  }  \n                        <TableBody questions={this.state.questions} answers={this.state.answers} answerids={this.state.answerids} nodes={this.state.nodes} edges={this.state.edges} turn={this.state.turn}/>\n                        <Description/>\n                    </div>\n                    </div>\n                 \n                  <div className=\"flex-small\">\n                   \n                     <div className=\"small-container\" style={widthstyle}>\n                        <SampleQuestion showSampleAnswers={this.showSampleAnswers}/> { }\n                        <Options onChange={this.handleOptionChange} value={this.state}/>\n                    </div>\n                    </div>\n                </div>\n                <Footer/>\n                </div>\n            \n        \n          ); \n     \n    };\n    \n    // <div className=\"small-container\">  <div className=\"flex-small\">\n}\n\nconst SampleQuestion = props  => {\n     var marginbutton = {\"margin-left\": \"80%\"}\n      \n    const {showSampleAnswers} = props\n    return(\n       \n  //      <div>        \n    //    <label htmlFor=\"button\">Sample Conversation</label>\n      //  <button className=\"button\">Flowering Plants for Cold Climates</button>\n       // { }\n        //</div>\n                   \n        <table >\n            <thead> \n                <tr key={'sampleconv_head'}>\n                <th>Sample Conversation on Flowering Plants for Cold Climates</th>\n                \n                </tr>\n            </thead>\n            <tbody>\n                <tr class=\"no-bottom-border\" key={'turn1'}>\n                <td><b>Turn 1: </b> What flowering plants work for cold climates? <br/> \n                <b>Turn 1: </b> What flowering plants work for cold climates? <br/>\n                <b>Turn 1: </b> What flowering plants work for cold climates? <br/>\n                <b>Turn 1: </b> What flowering plants work for cold climates? <br/>\n                <b>Turn 1: </b> What flowering plants work for cold climates? </td>\n                </tr>\n              \n                <tr key={'buttonrow'} >\n                    <td><button className=\"button\"  onClick={showSampleAnswers} style={marginbutton}>Answer</button></td>\n                </tr>\n                \n                \n            </tbody>   \n        </table>\n    )\n}\n\nconst Description = () => {\n    return (\n        <table >\n            <thead> \n                <tr key={'description'}>\n                    <th>Description</th>\n                </tr>\n            </thead>\n            <tbody>\n               <tr key={'desc'}>\n                    <td>\n                        <p>CROWN is an unsupervised approach for conversational passage ranking. Answers are retrieved from MS MARCO and TREC CAR datasets. We formulated the objective of maximizing the passage score for a query as a combination of similarity and coherence. Passages are preferred that\ncontain words semantically similar to the words used in the question. Coherence\nis expressed using term proximity. We built a word-proximity network\nfrom the corpus, where words are nodes and there is an edge\nbetween two nodes if they co-occur in the same passage in a statistically\nsignificant way, within a context window. We use NPMI (normalized pointwise\nmutual information) as a measure of this word association significance.</p>\n\n                        <p>Our code and data are available here.</p>\n\n                        <p>To cite CROWN:</p>\n\n                        <p>For feedback and clarifications, please contact:</p>\n                            <ul>\n                           \n                                <li><a href=\"http://people.mpi-inf.mpg.de/~mkaiser/\">Magdalena Kaiser</a> (mkaiser AT mpi HYPHEN inf DOT mpg DOT de)</li>\n                                <li><a href=\"http://people.mpi-inf.mpg.de/~rsaharo/\">Rishiraj Saha Roy</a> (rishiraj AT mpi HYPHEN inf DOT mpg DOT de)</li>\n                            </ul>\n                       \n                    </td>\n                </tr>\n            </tbody>   \n        </table>\n    )\n}\n\nconst LoadingIndicator = props => {\n   const { promiseInProgress } = usePromiseTracker();\n\n   return (\n        promiseInProgress && \n        <div style={{ \n            width: \"100%\",\n            height: \"100\",\n            display: \"flex\",\n            justifyContent: \"center\",\n            alignItems: \"center\"}}>\n            <Loader type=\"ThreeDots\" color=\"#0366EE\" height={100} width={100} />\n        </div>\n  );  \n }\n\n  \nconst TableBody = props  => {\n    \n   const {questions, answers, answerids, nodes, edges, turn} = props;\n  \n   console.log(\"in tablebody, questions: \" + questions)\n   console.log(\"in tablebody, answers: \" + answers)\n    console.log(\"in tablebody, turn: \" + turn)\n      \n   var tablelayout = {border: \"0\"} \n   \n    return (\n        <table style={tablelayout}> \n            <tbody  >\n             {[...questions].reverse().map((question, index) => {\n                 return (\n                    <tr className=\"noBorder\" key={index}>\n                        <td>\n                        <InnerTable question={question} answers={[...answers].reverse()[index]} answerids={[...answerids].reverse()[index]}  \n                        nodes={[...nodes].reverse()[index]}  edges={[...edges].reverse()[index]}  nbr={index} turn={turn}/>\n                        </td>\n                    </tr>\n                     \n                 )})\n            }\n            </tbody>\n        </table>\n    );\n  \n   \n}; \n\n\nconst InnerTable = props => {\n    \n    const {question, answers, answerids, nodes, edges, nbr, turn} = props\n\n    const rows = answers.map((answer, index) => {\n        \n        for (var i = 0; i < nodes[answerids[index]].length; i++) {\n            var find = nodes[answerids[index]][i]\n            var pattern = `(\\\\s|\\\\b)(${find})(\\\\s|\\\\b)`;\n            var regexp = new RegExp(pattern, 'ig'); // ignore case (optional) and match all\n            var replaceMask = `$1<b>$2</b>$3`;\n            answer = answer.replace(regexp, replaceMask);\n         \n        }\n      \n        return(\n        <tr class=\"no-bottom-border\" key={\"row_table\".concat(index.toString())}>\n            <td>\n                <table>\n                    <tbody>\n                        <tr class=\"no-bottom-border\" key={\"\".concat(nbr.toString()).concat(\"_\").concat(index.toString())}>\n                            <td><b>Rank {index+1} : </b> {ReactHtmlParser(answer)} [{answerids[index]}]</td>\n\n                        </tr>\n                        <tr class=\"no-bottom-border\" key={\"nodes\".concat(nbr.toString()).concat(\"_\").concat(index.toString())}>\n                        <td><b>Top Nodes: </b>{nodes[answerids[index]].toString()}</td>\n                        </tr>\n\n                        <tr class=\"no-bottom-border\" key={\"edges\".concat(nbr.toString()).concat(\"_\").concat(index.toString())}>  \n                                    <td><b>Top Edges:</b> {edges[answerids[index]].toString()}</td>\n                        </tr>\n                    </tbody>\n                </table>\n            </td>\n        </tr>\n         );\n    });\n\n    return (\n        <table>\n           <thead>\n                <tr key={question}>\n                    <th>Results for Turn {turn-nbr+1}: {question}</th>\n                </tr>\n           </thead>\n           <tbody>{rows}</tbody>\n        </table>\n    )\n       \n};\n\n\nconst Footer = () => {\n    \n    return (\n        <div>\n            <footer className=\"footer\" >\n                <hr/>\n                <div className=\"full-container\">\n                    <p align=\"right\">         \n                       \n                        Â© <a href=\"https://www.mpi-inf.mpg.de/departments/databases-and-information-systems/\" target=\"_blank\">Database\n                                                            &amp; Information Systems Group</a>, <a href=\"http://www.mpi-inf.mpg.de/home/\" target=\"_blank\">Max Planck Institute\n                                                            for Informatics</a>. 2019.{ } | { }\n                        <a href=\"https://imprint.mpi-klsb.mpg.de/inf/crown.mpi-inf.mpg.de\" target=\"_blank\">Impressum</a>{ } | { }\n                        <a href=\"https://data-protection.mpi-klsb.mpg.de/inf/crown.mpi-inf.mpg.de\" target=\"_blank\">Datenschutz</a>\n                        <img src=\"Logo_MPII.png\" className=\".responsive-image\"  width=\"200\" height=\"50\"/>            \n                    </p> \n                </div>               \n            </footer>\n        </div>\n    )  \n};\n\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}